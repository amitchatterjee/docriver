version: '3.9'
networks:
  default:
    name: dev
    external: true
services:
  token:
    container_name: docriver-token
    image: docriver-base:0.0.1-SNAPSHOT
    user: 1000:1000
    volumes:
    - ${DOCRIVER_GW_HOME}/src:/app
    - ${HOME}/.ssh/docriver:/keystore
    command: ["python", "/app/reference_token_server.py", "--keystore", "/keystore/docriver.p12", "--password", "docriver", "--oktaUrl", "${DOCRIVER_AUTH_URL}", "--oktaAud", "api://default", "--log", "INFO", "--debug"]
    # The portmapping must be enabled only for debugging. Any requests should be proxied after authentication/authorization
    # ports:
    # - 15001:5001